<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Addition</title>
<link href="stylesheet.css" rel="stylesheet" type="text/css">
<!--<link href="tabs.css" rel="stylesheet" type="text/css"> -->
<!-- <script src="../mathjax/MathJax.js">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script> -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-22953817-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<script type="text/javascript">
function toggleMenu(objID, button) {
    if (!document.getElementById) return;
    var ob = document.getElementById(objID).style;
    if(ob.display == 'block') {
	ob.display = 'none';
	button.innerHTML = "+";
    }
    else {
	ob.display = 'block';
	button.innerHTML = "-";
    }
    //ob.display = (ob.display == 'block')?'none': 'block';
}
</script>
</head><body>
<a name="top"></a>
<!-- wrap starts here -->
<div id="nottrac">
<div id="wrap">
	<a name="top"></a>
	<!-- header -->
	<div id="topheader">
		<div id="logo"><img src="logo.jpg" alt="pyVAFM" /></div>
		<!-- tabs 
		<ul>
			<li><a href="../index.html"><span>Home</span></a></li>
			<li><a href="./credits.html"><span>About</span></a></li>
			<li id="current"><a href="./index.html"><span>Documentation</span></a></li>
			<li><a href="../download.html"><span>Download</span></a></li>
			<li><a href="../contact.html"><span>Contact</span></a></li>
		</ul>
		-->
	</div>
	<div id="header-slogan">
	<span id="slogan">Pythonic Virtual Machine</span>
	</div>
	<div id="maincol">
    <div id="top"><!-- do not remove this div! -->
<!-- Generated by Doxygen 1.8.9.1 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Addition </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Simple Addition </h1>
<p>In this basic tutorial we will learn how to create two sin waves and add them. So lets start by adding the modules that the PyVAFM requires.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">from</span> vafmbase <span class="keyword">import</span> ChannelType</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">from</span> vafmcircuits <span class="keyword">import</span> Machine</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> vafmcircuits</div>
</div><!-- fragment --><p>If you have problems importing these modules be sure you have followed the steps in section 1.3. The next step is to initialise the machine, every simulation needs at least one machine. You can think of these machines as the box you put your circuits in so they will need a unique name for each new machine you create. So to initialise the machine we will use this code:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;machine = Machine(name=<span class="stringliteral">&#39;machine&#39;</span>, dt=0.01);</div>
</div><!-- fragment --><p>So here we have added a Machine with the object identification "machine", name of the machine is "machine" and timestep is set to "0.01".</p>
<p>So now we must add the circuits that we need so lets add a waver circuit to generate our sin wave.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;machine.AddCircuit(type=<span class="stringliteral">&#39;waver&#39;</span>,name=<span class="stringliteral">&#39;wave&#39;</span>, amp=1, freq=2)</div>
</div><!-- fragment --><p>So this will be capable of outputting a a wave of amplitude 1 (amp=1) and a frequency of 2 (freq=2). Next we need to add our addition circuit, in much the same way as we added the previous:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;machine.AddCircuit(type=<span class="stringliteral">&#39;opAdd&#39;</span>,name=<span class="stringliteral">&#39;Add&#39;</span>)</div>
</div><!-- fragment --><p>So now we have added all the circuits we need so next we have to connect the circuits.</p>
<p>if we look at the documentation {<a href="http://johnt447.github.io/pyvafm/classvafmcircuits__signal__gens_1_1waver.html">http://johnt447.github.io/pyvafm/classvafmcircuits__signal__gens_1_1waver.html</a>}{webpage} we can see that the waver circuit has 3 output channels namely, sin, cos and sqw. Since we are only interested in outputting the sin wave we will only use the "sin" output channel. Like wise if we look at the {<a href="http://johnt447.github.io/pyvafm/classvafmcircuits__math_1_1opAdd.html">http://johnt447.github.io/pyvafm/classvafmcircuits__math_1_1opAdd.html</a>}{opAdd} circuit we can see that it can accept any number inputs as long as the form is inx where x is the number of the input channel. So remember we named our waver circuit "wave" and our adder circuit "Add", we will put this to use now by connecting the output channel named "sin" of our circuit named "wave" to the input "in1" and "in2" of our circuit named "Add".</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;machine.Connect(<span class="stringliteral">&quot;wave.sin&quot;</span>,<span class="stringliteral">&quot;Add.in1&quot;</span>)</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;machine.Connect(<span class="stringliteral">&quot;wave.sin&quot;</span>,<span class="stringliteral">&quot;Add.in2&quot;</span>)</div>
</div><!-- fragment --><p>Now that we have connected our circuits we need to setup the output circuit so we can get our results.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;out1 = machine.AddCircuit(type=<span class="stringliteral">&#39;output&#39;</span>,name=<span class="stringliteral">&#39;output&#39;</span>,file=<span class="stringliteral">&#39;tut1.dat&#39;</span>, dump=1)</div>
</div><!-- fragment --><p>So we have added the (<a href="http://johnt447.github.io/pyvafm/classvafmcircuits__output_1_1output.html">http://johnt447.github.io/pyvafm/classvafmcircuits__output_1_1output.html</a>)[output] circuit in the same way as we added the previous circuits, only thing different here is the object identification "out1" and the initialisation parameters. The parameter file names the output file to whatever you set it as and the parameter dump is how often the output file will write to the file. Next the chanels we would like to output have to be registerted;</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;out1.Register(<span class="stringliteral">&#39;global.time&#39;</span>, <span class="stringliteral">&#39;wave.sin&#39;</span>, <span class="stringliteral">&#39;Add.out&#39;</span>)</div>
</div><!-- fragment --><p>So here we have registered the channels "global.time" , "wave.sin" and "Add.out", these will be written to the output file as the simulation runs. Now the last thing to do is to tell the machine to run for a set length of time.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;machine.Wait(5)</div>
</div><!-- fragment --><p>So this will set the machine to compute for 5 seconds, the full input script is shown below;</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">from</span> vafmbase <span class="keyword">import</span> ChannelType</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">from</span> vafmcircuits <span class="keyword">import</span> Machine</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> vafmcircuits</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">#Assign the machine with a time step of 0.01</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;machine = Machine(name=<span class="stringliteral">&#39;machine&#39;</span>, dt=0.01);</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">#Add waver and add circuit</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;machine.AddCircuit(type=<span class="stringliteral">&#39;waver&#39;</span>,name=<span class="stringliteral">&#39;wave&#39;</span>, amp=1, freq=2)</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;machine.AddCircuit(type=<span class="stringliteral">&#39;opAdd&#39;</span>,name=<span class="stringliteral">&#39;Add&#39;</span>)</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">#connect a sin wave to both inputs</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;machine.Connect(<span class="stringliteral">&quot;wave.sin&quot;</span>,<span class="stringliteral">&quot;Add.in1&quot;</span>)</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;machine.Connect(<span class="stringliteral">&quot;wave.sin&quot;</span>,<span class="stringliteral">&quot;Add.in2&quot;</span>)</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">#Add the output circuit and register channels</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;out1 = machine.AddCircuit(type=<span class="stringliteral">&#39;output&#39;</span>,name=<span class="stringliteral">&#39;output&#39;</span>,file=<span class="stringliteral">&#39;tut1.dat&#39;</span>, dump=1)</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;out1.Register(<span class="stringliteral">&#39;global.time&#39;</span>, <span class="stringliteral">&#39;wave.sin&#39;</span>, <span class="stringliteral">&#39;Add.out&#39;</span>)</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">#ask the machine to wait for 5 seconds</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;machine.Wait(5)</div>
</div><!-- fragment --><p>So if you now plot the first ad third column of the file "tut1.dat" you should find that you have now produced an wave that is equal to sin(2t) + sin(2t) as shown in figure 2.</p>
<div class="image">
<img src="tut1.png" alt="tut1.png"/>
<div class="caption">
Tutorial 1 output</div></div>
</div></div><!-- contents -->

<hr size="1"><address style="text-align: right;">
<div class="float-left">Documentation for pyVAFM </div>
<div class="float-right">
<small>
Generated on Tue Nov 1 2016 15:41:03 for pyVAFM by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.8.9.1</small></address>
</div>
<!-- top ends here -->
<!-- </div> -->
<!-- wrap ends here -->
</div>
<!-- footer starts here -->
<div class="footer">
    <p>
    <a href="./index.html">Home</a><br>
    Copyright &copy; 2013 Regents of Aalto University
    </p>
</div>
</div>
</body>
</html>
